"use strict";(self.webpackChunkekydum_ui=self.webpackChunkekydum_ui||[]).push([[257],{257:(E,p,s)=>{s.r(p),s.d(p,{HLSProvider:()=>m});var o=s(467),l=s(203),i=s(460),h=s(627),c=s(259),v=s(931),d=s(418);class f{constructor(t,r,n){this.Bh=t,this.ph=r,this.jf=n,this.Ch()}Ch(){var t=this;return(0,o.A)(function*(){const r={onLoadStart:t.ge.bind(t),onLoaded:t.ue.bind(t),onLoadError:t.Dh.bind(t)};let n=yield function y(e){return a.apply(this,arguments)}(t.Bh,r);if((0,i.b0)(n)&&!(0,i.Kg)(t.Bh)&&(n=yield function g(e){return u.apply(this,arguments)}(t.Bh,r)),!n)return null;if(!n.isSupported()){const S="[vidstack]: `hls.js` is not supported in this environment";return t.ph.player.dispatchEvent(new d.vP("hls-unsupported")),t.ph.delegate.p("error",{detail:{message:S,code:4}}),null}return n})()}ge(){this.ph.player.dispatchEvent(new d.vP("hls-lib-load-start"))}ue(t){this.ph.player.dispatchEvent(new d.vP("hls-lib-loaded",{detail:t})),this.jf(t)}Dh(t){const r=(0,h.Q)(t);this.ph.player.dispatchEvent(new d.vP("hls-lib-load-error",{detail:r})),this.ph.delegate.p("error",{detail:{message:r.message,code:4}})}}function u(){return(u=(0,o.A)(function*(e,t={}){if(!(0,i.b0)(e)){if(t.onLoadStart?.(),e.prototype&&e.prototype!==Function)return t.onLoaded?.(e),e;try{const r=(yield e())?.default;if(!r||!r.isSupported)throw Error("");return t.onLoaded?.(r),r}catch(r){t.onLoadError?.(r)}}})).apply(this,arguments)}function a(){return(a=(0,o.A)(function*(e,t={}){if((0,i.Kg)(e)){t.onLoadStart?.();try{if(yield(0,h.R)(e),!(0,i.Tn)(window.Hls))throw Error("");const r=window.Hls;return t.onLoaded?.(r),r}catch(r){t.onLoadError?.(r)}}})).apply(this,arguments)}class m extends c.VideoProvider{$$PROVIDER_TYPE="HLS";mh=null;od=new v.H(this.video);get ctor(){return this.mh}get instance(){return this.od.instance}static supported=(0,h.U)();get type(){return"hls"}get canLiveSync(){return!0}lh="https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.min.js";get config(){return this.od.nh}set config(t){this.od.nh=t}get library(){return this.lh}set library(t){this.lh=t}preconnect(){(0,i.Kg)(this.lh)&&(0,h.p)(this.lh)}setup(t){super.setup(t),new f(this.lh,t,r=>{this.mh=r,this.od.setup(r,t),t.delegate.p("provider-setup",{detail:this});const n=(0,l.se)(t.$store.source);n&&this.loadSource(n)})}loadSource(t){var r=this;return(0,o.A)(function*({src:n}){(0,i.Kg)(n)&&r.od.instance?.loadSource(n)}).apply(this,arguments)}onInstance(t){const r=this.od.instance;return r&&t(r),this.od.oh.add(t),()=>this.od.oh.delete(t)}destroy(){this.od.Jg()}}}}]);